(function(e,t){"use strict";const n={};const i=t.edit("code-snippet-editor");const s="Untitled";n.init=function(){this.dispatchFont();this.dispatchTheme();this.dispatchDelete();this.dispatchOpenFile();this.setAceDefaultConfig();this.dispatchCodePreview();this.dispatchCodeExecution();this.dispatchChangeLanguage();this.dispatchCodeSnippetList();this.dispatchSnippetLabel();this.dispatchCreateNewSnippet();this.dispatchCopyToClipboard();this.DOM.output.hide()};n.getThemes=["dawn","chrome","github","dracula","gob","gruvbox","idle_fingers","monokai","nord_dark","solarized_dark","sqlserver"];n.getCodeSnippet={get_posts:"$posts = get_posts( 1 );\n\n var_dump( $posts );",action:"add_action( 'sample_action' , static function(){\n\techo 'Silence is golden';\n});\n\n//call action\ndo_action( 'sample_action' );",filters:"add_filter( 'sample_filter' , static function(){\n\techo 'Silence is golden';\n});\n\n//call filters\napply_filters( 'sample_filter' );",get_userdata:"$user = get_userdata( 10 );\n\n//output\nvar_dump( $user );",get_users:"$users = get_users( [ 'role__in' => [ 'author', 'subscriber' ] ] );\n\nforeach( $users as $user ) {\n\techo '<span>' . esc_html( $user->display_name ) . '</span>';\n}",shortcode:"add_shortcode( 'sample_shortcode', static function() {\n\treturn 'Silence is golden';\n});\n\necho do_shortcode( '[sample_shortcode]' );",user_meta:"global $current_user;\n\nget_currentuserinfo();\n$userMeta = get_user_meta( $current_user->ID, 'sample_meta_key', true );\nvar_dump( $userMeta );\n\n$create_or_update = update_user_meta( $current_user->ID, 'sample_meta_key', 'sample_meta_value' );",option:"echo get_option( 'sample_option_key', 0 );\n\n //store option\nupdate_option( 'sample_option_key', 'sample_option_value' );",terms:"$terms = get_terms( array( 'taxonomy' => 'tax_name', 'parent' => 0 ) );\n\nvar_dump( $terms );"};n.DOM={output:e("#instant-snippet-output"),font:e("#instant-snippet-font-size"),file_history:e(".code-snippet-history"),open_recent_file:e(".open-recent-file"),copy_button:e("#code-snippet-copy-code"),theme:e("#instant-snippet-change-theme"),create_new_tab:e("#code-snippet-new-tab"),current_tab:e("#code-snippet-current-tab"),language:e("#instant-snippet-change-lang"),delete_file:e("#code-snippet-delete-file"),preview_pane:e("#code-snippet-preview-pane"),snippet_toolbar:e(".code-snippet-quick-code"),execution_button:e("#instant-snippet-execute"),recent_filename:e("#code-snippet-recent-filename"),recent_files:e("#code-snippet-recently-veiwed-file"),snippet_toolbar_button:e(".code-snippet-quick-code label")};n.ACTIONS={code_execution:"code_snippet_execution",run_time:"code_snippet_run_time"};n.setAceDefaultConfig=function(){i.setTheme("ace/theme/monokai");i.session.setMode("ace/mode/php")};n.setTheme=function(){const e=this.getThemes;let t="";for(let n of e){const e=n.substring(0,1).toUpperCase()+n.substring(1);t+=`<option value="${n}">${e}</option>`}return t};n.dispatchTheme=function(){const t=this.setTheme();this.DOM.theme.html(t);this.DOM.theme.on("change",(function(){const t=e(this).val()===undefined?"monokai":e(this).val();i.setTheme(`ace/theme/${t}`)}))};n.dispatchFont=function(){const t=this.setFontSizeList();this.DOM.font.html(t);this.DOM.font.on("change",(function(){let t=e(this).val()===undefined?13:e(this).val();let n=parseInt(t);i.setFontSize(n)}))};n.dispatchCodeSnippetList=function(){let e="";const t=this.getCodeSnippet;let n=Object.keys(t);for(let i of n){e+=`<label data-code="${t[i]}"> ${i}</label>`}this.DOM.snippet_toolbar.append(e)};n.dispatchChangeLanguage=function(){const t=this;this.DOM.language.on("change",(function(){const n=e(this).val()===undefined?"php":e(this).val();switch(n){case"sql":t.setPhp();break;case"javascript":t.setJavascript();break;default:t.setDefault();i.session.setMode(`ace/mode/php`);break}}))};n.setAction=function(){let e="<?php \n\n$posts = get_posts(1);\n\n var_dump($posts);";i.session.setValue(e)};n.setDefault=function(){let e="<?php \n\n//Silence is golden";i.session.setValue(e)};n.setPhp=function(){let e="<?php \n\n// $wpdb db class model \n global $wpdb;";e+="\n\n//Write your SQL here\n$query = 'SELECT * FROM wp_posts LIMIT 1';";e+="\n$results = $wpdb->get_results($query);";e+="\nvar_dump($results);";i.session.setValue(e)};n.setJavascript=function(){let e="<!doctype html>\n";e+="<html>\n\t<head>\n\t<title>"+s+"</title>\n";e+="\n\t\t<script>\n";e+="\t\t\tconsole.log('Silence is golden');";e+="\n\t\t<\/script>\n";e+="\t</head>\n<body>\n\t<h2>Hello world</h2>\n";e+="</body>\n</html>";i.session.setValue(e);i.session.setMode("ace/mode/html")};n.dispatchSnippetLabel=function(){const t=this;this.DOM.snippet_toolbar.find("label").on("click",(function(n){n.preventDefault();const s=e(this).data("code");t.DOM.current_tab.val("0");const o=`<?php\n\n${s}`;i.getSession().setValue(o)}))};n.createFile=function(e){const t=e+".php";const n=this.getFileAttribute();if(n.indexOf(t)===-1){let t=`<li data-file="${e}"><a href="#" id="code-snippet-delete-file" data-file="${e}"><span>&times;</span></a>\n\t\t\t\t<a href="#" style="text-decoration: none;" class="open-recent-file" data-id="${e}" data-file="${e}">\n\t\t\t\t<h3 style="padding-top: 0px;margin: 0px;">${e}</h3>\n\t\t\t\t<p>\n\t\t\t\t\t<small>Modified: -- </small>\n\t\t\t\t</p>\n      </a></li>`;this.DOM.file_history.find("ul").prepend(t)}};n.getFileAttribute=function(){const e=this.DOM.file_history.find("ul");const t=e.children();let n=[];for(let e of t){n.push(e.getAttribute("data-file").trim())}return n};n.dispatchCodeExecution=function(){const e=this;this.DOM.execution_button.on("click",(function(){const t=e.getNewFileName();const n={tab:t.tabIndex,filename:t.title,action:e.ACTIONS.code_execution,code:i.getSession().getValue()};const o=`<i>${s}${t.tabIndex}</i>`;e.DOM.recent_files.html(o);e.DOM.recent_filename.val(t.tabIndex);e.createFile(t.title);e.ajax(n).success((function(t){e.DOM.output.slideDown().html(t)})).error((function(t){e.DOM.output.slideDown().html("").html(t.responseText)}))}))};n.getNewFileName=function(){i.getSession().getValue();let e=this.DOM.recent_filename.val();let t=this.DOM.current_tab.val();let n=t==="0"?parseInt(e)+1:t;return{title:s+n,tabIndex:n}};n.dispatchNewTab=function(){const e=this;this.DOM.create_new_tab=function(t){t.preventDefault();let n=e.DOM.recent_filename.val();let o=isNaN(n)||n===0?1:parseInt(n)+1;let a=s+o;e.DOM.recent_filename.val(o);i.getSession().setValue("");e.DOM.recent_files.html(`<i>${a}</i>`)}};n.dispatchCreateNewSnippet=function(){const e=this;this.DOM.create_new_tab.on("click",(function(t){t.preventDefault();let n=e.DOM.recent_filename.val();let o=isNaN(n)||n===0?1:parseInt(n)+1;const a=`<i>${s}${o}</i>`;e.DOM.recent_filename.val(o);e.DOM.recent_files.html(a);const c={code:i.getSession().setValue(""),tab:o,action:e.ACTIONS.code_execution,filename:a};e.ajax(c).success((function(t){e.DOM.output.slideDown().html("")})).error((function(e){console.log(e.responseText)}))}))};n.ajax=function(t){return e.ajax({url:ajaxurl,data:t,method:"POST"})};n.dispatchOpenFile=function(){const t=this;this.DOM.open_recent_file.on("click",(function(n){n.preventDefault();const s=e(this).data("file");const o={filename:s,action:"code_open_existing_file"};t.ajax(o).success((e=>{i.getSession().setValue(e);const n=s.match(/\d/g);const o=n.join("");const a=`<i>${s}</i>`;t.DOM.current_tab.val(o);t.DOM.recent_files.html(a)})).error((e=>{console.log(e)}))}))};n.dispatchDelete=function(){const t=this;this.DOM.delete_file.on("click",(function(n){n.preventDefault();const i=e(this).data("file");if(window.confirm(`Are you sure you want to delete ${i}?`)){const n={filename:i,action:"code_snippet_delete_file"};const s=e(this);t.ajax(n).success((e=>{if(e==="deleted"){alert(i+" is Deleted !");s.parent().fadeOut("slow")}})).error((e=>{alert(e.responseText)}))}}))};n.dispatchCodePreview=function(){const e=this;this.DOM.preview_pane.on("click",(function(t){t.preventDefault();e.DOM.output.toggle("slow")}))};n.dispatchCopyToClipboard=function(){this.DOM.copy_button.on("click",(function(t){var n=i.selection.toJSON();i.selectAll();i.focus();document.execCommand("copy");i.selection.fromJSON(n);e(this).text("Copied !")}))};n.setFontSizeList=function(){const e=100;let t="";for(let n=10;n<=e;n+=2){t+=`<option value="${n}">${n}</option>`}return t};n.init()})(jQuery,ace);
